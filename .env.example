# Sofia V2 Environment Configuration Example
# Copy this file to .env and modify the values according to your setup

# ===== REDIS CONFIGURATION =====
REDIS_URL=redis://localhost:6379
REDIS_STREAM_MAXLEN=10000
REDIS_TTL_HOURS=48

# ===== CRYPTO WEBSOCKET CONFIGURATION =====
# Exchanges to enable (comma-separated)
CRYPTO_EXCHANGES=binance,okx,coinbase,bybit

# Symbols to trade (use exchange-specific format, will be normalized)
CRYPTO_SYMBOLS=BTC/USDT,ETH/USDT,SOL/USDT,ADA/USDT,DOT/USDT,LINK/USDT

# WebSocket connection settings
CRYPTO_WS_PING_INTERVAL=20
CRYPTO_STALE_THRESHOLD_SEC=15
CRYPTO_MAX_RECONNECT_DELAY=60
CRYPTO_BASE_DELAY=1.0
CRYPTO_JITTER_FACTOR=0.1
CRYPTO_DEDUP_CACHE_SIZE=10000

# ===== TIME SERIES WRITER CONFIGURATION =====
# Batch processing settings
TS_BATCH_SIZE=100
TS_FLUSH_INTERVAL=5
TS_MAX_QUEUE_SIZE=10000
TS_STALE_THRESHOLD=30

# Consumer group settings
TS_CONSUMER_GROUP=ts_writers
TS_CONSUMER_NAME=writer_1

# ===== QUESTDB CONFIGURATION =====
QUESTDB_HOST=localhost
QUESTDB_PORT=8812
QUESTDB_DB=qdb
QUESTDB_USER=admin
QUESTDB_PASSWORD=quest

# ===== TIMESCALEDB CONFIGURATION =====
TIMESCALEDB_HOST=localhost
TIMESCALEDB_PORT=5432
TIMESCALEDB_DB=timeseries
TIMESCALEDB_USER=postgres
TIMESCALEDB_PASSWORD=password

# ===== EQUITY DATA CONFIGURATION =====
# Symbols for equity trading
EQUITY_SYMBOLS=AAPL,MSFT,GOOGL,AMZN,TSLA,NVDA,META,NFLX,AMD,CRM

# Fetch intervals
EQUITY_FETCH_INTERVAL=60
EQUITY_MAX_CONCURRENT=10
EQUITY_RETRY_DELAY=5

# ===== ALPACA CONFIGURATION =====
ALPACA_API_KEY=your_alpaca_api_key_here
ALPACA_SECRET_KEY=your_alpaca_secret_key_here
ALPACA_BASE_URL=https://paper-api.alpaca.markets

# ===== IEX CLOUD CONFIGURATION =====
IEX_API_KEY=your_iex_api_key_here

# ===== TWELVEDATA CONFIGURATION =====
TWELVEDATA_API_KEY=your_twelvedata_api_key_here

# ===== NEWS RSS CONFIGURATION =====
# News sources to enable (comma-separated or "all")
NEWS_ENABLED_SOURCES=all

# Processing settings
NEWS_MAX_CONCURRENT=5
NEWS_DEDUP_WINDOW_HOURS=24
NEWS_REDIS_TTL_HOURS=48

# ===== WHALE TRADE MONITORING =====
# Thresholds in USDT
WHALE_MIN_THRESHOLD_USDT=100000
WHALE_LARGE_THRESHOLD_USDT=500000
WHALE_MEGA_THRESHOLD_USDT=1000000

# Pattern detection
WHALE_ACCUMULATION_WINDOW_SEC=300
WHALE_ACCUMULATION_THRESHOLD_USDT=200000
WHALE_UNUSUAL_ACTIVITY_THRESHOLD=3

# Consumer settings
WHALE_CONSUMER_GROUP=whale_monitors
WHALE_CONSUMER_NAME=whale_monitor_1
WHALE_BATCH_SIZE=10
WHALE_ALERTS_MAXLEN=1000

# Notification settings
WHALE_WEBHOOK_URL=https://your-webhook-url.com/webhook
WHALE_EMAIL_RECIPIENTS=admin@example.com,trader@example.com

# ===== AI CONFIGURATION =====
# Symbols for AI processing
AI_SYMBOLS=BTCUSDT,ETHUSDT,SOLUSDT,ADAUSDT

# Feature extraction
FEATURE_BUFFER_SIZE=1440
FEATURE_COMPUTATION_INTERVAL=60
FEATURE_CONSUMER_GROUP=featurizers
FEATURE_CONSUMER_NAME=featurizer_1
FEATURES_STREAM_MAXLEN=10000

# Model training
AI_MIN_TRAINING_SAMPLES=1000
AI_RETRAIN_INTERVAL_HOURS=6
AI_CALIBRATION_ENABLED=true
AI_MODEL_TYPES=lightgbm,logistic_regression
AI_TRAINING_WINDOW_HOURS=24
AI_MAX_TRAINING_SAMPLES=10000
AI_MODEL_SAVE_DIR=models/ai

# LightGBM hyperparameters
LGBM_NUM_LEAVES=31
LGBM_LEARNING_RATE=0.05
LGBM_FEATURE_FRACTION=0.8
LGBM_BAGGING_FRACTION=0.8
LGBM_BAGGING_FREQ=5
LGBM_MIN_CHILD_SAMPLES=20
LGBM_MAX_DEPTH=8
LGBM_REG_ALPHA=0.1
LGBM_REG_LAMBDA=0.1
LGBM_NUM_BOOST_ROUND=100
LGBM_EARLY_STOPPING=10

# Logistic Regression hyperparameters
LOGREG_C=1.0
LOGREG_MAX_ITER=1000
LOGREG_SOLVER=liblinear

# Prediction settings
AI_PREDICTION_INTERVAL=60
AI_CONSUMER_GROUP=ai_models
AI_CONSUMER_NAME=ai_model_1
PREDICTIONS_STREAM_MAXLEN=1000

# ===== PAPER TRADING CONFIGURATION =====
# Initial balance
PAPER_INITIAL_BALANCE=100000

# Trading symbols
PAPER_TRADING_SYMBOLS=BTCUSDT,ETHUSDT,SOLUSDT

# Risk management
PAPER_MAX_POSITION_SIZE_PCT=10.0
PAPER_MAX_TOTAL_EXPOSURE_PCT=80.0
PAPER_MAX_DAILY_LOSS_PCT=5.0
PAPER_MAX_ORDERS_PER_SYMBOL=5
PAPER_MIN_ORDER_VALUE=10.0

# Fee structure (in basis points)
PAPER_MAKER_FEE_BPS=10
PAPER_TAKER_FEE_BPS=20

# Slippage simulation (in basis points)
PAPER_BASE_SLIPPAGE_BPS=5
PAPER_MAX_SLIPPAGE_BPS=50
PAPER_SLIPPAGE_IMPACT_FACTOR=0.1

# AI signal execution
AI_MIN_SIGNAL_CONFIDENCE=0.6
AI_POSITION_SIZE_PCT=2.0
AI_SIGNAL_CONSUMER_GROUP=signal_executors
AI_SIGNAL_CONSUMER_NAME=executor_1

# ===== EMAIL NOTIFICATION CONFIGURATION =====
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your_email@gmail.com
SMTP_PASSWORD=your_app_password

# ===== TELEGRAM NOTIFICATION CONFIGURATION =====
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
TELEGRAM_CHAT_ID=your_telegram_chat_id

# ===== MONITORING & METRICS =====
# Prometheus ports
PROMETHEUS_PORT=8000
METRICS_API_PORT=8001

# Health check intervals
HEALTH_CHECK_INTERVAL=30

# ===== LOGGING CONFIGURATION =====
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# ===== PERFORMANCE TUNING =====
# Number of worker processes/threads
WORKERS=4
MAX_CONNECTIONS=1000
CONNECTION_POOL_SIZE=10

# Memory limits
MAX_MEMORY_MB=2048
CACHE_SIZE_MB=256

# ===== SECURITY CONFIGURATION =====
# API Keys and secrets should be kept secure
SECRET_KEY=your_very_secure_secret_key_here
JWT_SECRET=your_jwt_secret_here
ENCRYPTION_KEY=your_encryption_key_here

# CORS settings
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
ALLOWED_HEADERS=*

# ===== DATABASE CONNECTIONS =====
# Maximum connection pool sizes
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=0
DB_POOL_TIMEOUT=30

# Connection timeouts
DB_CONNECT_TIMEOUT=10
DB_READ_TIMEOUT=30
DB_WRITE_TIMEOUT=30

# ===== RATE LIMITING =====
# API rate limits
API_RATE_LIMIT_PER_MINUTE=1000
API_BURST_LIMIT=100

# Data source rate limits
BINANCE_RATE_LIMIT_PER_MINUTE=1200
COINBASE_RATE_LIMIT_PER_MINUTE=10000
OKX_RATE_LIMIT_PER_MINUTE=6000
BYBIT_RATE_LIMIT_PER_MINUTE=120

# ===== FEATURE FLAGS =====
# Enable/disable system components
ENABLE_CRYPTO_WS=true
ENABLE_EQUITIES_PULL=true
ENABLE_NEWS_RSS=true
ENABLE_WHALE_MONITOR=true
ENABLE_AI_MODELS=true
ENABLE_PAPER_TRADING=true
ENABLE_METRICS=true

# Development/Debug flags
DEBUG_MODE=false
VERBOSE_LOGGING=false
ENABLE_PROFILING=false

# ===== BACKUP & RECOVERY =====
# Backup settings
BACKUP_ENABLED=true
BACKUP_INTERVAL_HOURS=24
BACKUP_RETENTION_DAYS=30
BACKUP_LOCATION=./backups

# ===== SYSTEM LIMITS =====
# Resource limits
MAX_CPU_PERCENT=80
MAX_MEMORY_PERCENT=85
MAX_DISK_PERCENT=90

# Queue limits
MAX_QUEUE_SIZE=10000
MAX_BATCH_SIZE=1000
MAX_RETRY_ATTEMPTS=3

# ===== TESTING CONFIGURATION =====
# Test database settings
TEST_REDIS_URL=redis://localhost:6380
TEST_DB_NAME=sofia_test

# Test data settings
TEST_DATA_RETENTION_HOURS=1
ENABLE_TEST_DATA_GENERATION=false

# ===== ENVIRONMENT SPECIFIC =====
ENVIRONMENT=development
NODE_ENV=development
FLASK_ENV=development

# Service discovery
SERVICE_NAME=sofia-v2
SERVICE_VERSION=2.0.0
SERVICE_PORT=8000

# Health check endpoints
HEALTH_CHECK_PATH=/health
METRICS_PATH=/metrics
STATUS_PATH=/status

# ===== EXTERNAL SERVICES =====
# Optional external service URLs
EXTERNAL_API_BASE_URL=https://api.example.com
WEBHOOK_BASE_URL=https://webhooks.example.com
NOTIFICATION_SERVICE_URL=https://notifications.example.com

# ===== ADVANCED CONFIGURATION =====
# Message queue settings
MQ_PREFETCH_COUNT=100
MQ_HEARTBEAT_INTERVAL=600
MQ_CONNECTION_ATTEMPTS=5

# Caching configuration
CACHE_TTL_SECONDS=300
CACHE_MAX_ENTRIES=10000
ENABLE_CACHE_COMPRESSION=true

# Serialization settings
SERIALIZATION_FORMAT=json
ENABLE_DATA_COMPRESSION=true
COMPRESSION_LEVEL=6

# ===== LEGACY COMPATIBILITY =====
# Keep existing Sofia V1 settings for backward compatibility
SOFIA_ENV=development
SOFIA_WS_ENABLED=1
SOFIA_REST_FALLBACK=1
SOFIA_STALE_TTL_SEC=15
SOFIA_CACHE_TTL_SEC=5
SOFIA_SYMBOLS=BTC/USDT,ETH/USDT,SOL/USDT
SOFIA_UI_LIVE=0
SOFIA_REST_TIMEOUT_SEC=5
SOFIA_WS_PING_SEC=20
SOFIA_WS_COMBINED=true

# ===== SOFIA V2 API CONFIGURATION =====
SOFIA_API_BASE=http://127.0.0.1:8013
SOFIA_TRADE_BASE=http://127.0.0.1:8013
SOFIA_METRICS=http://127.0.0.1:8013
SOFIA_WS_URL=ws://127.0.0.1:8013/ws
SOFIA_TEST_SYMBOL=BTCUSDT
SOFIA_API_HOST=127.0.0.1
SOFIA_API_PORT=8013