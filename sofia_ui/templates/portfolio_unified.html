<<<<<<< HEAD
ï»¿{% extends "base.html" %}
=======
{% extends "base.html" %}
>>>>>>> 96de1d9

{% block content %}
<!-- Portfolio uses unified top navbar from base.html -->
<div class="pt-20"> <!-- Add top padding for fixed navbar -->
    <!-- Page Header -->
    <div class="px-6 py-6 border-b border-gray-800/50 bg-gray-900/40">
        <div class="max-w-7xl mx-auto">
            <div class="flex items-center justify-between">
                <h1 class="text-3xl font-bold text-white flex items-center">
                    <i class="fas fa-wallet mr-3 text-purple-400"></i>
                    Portfolio Management
                    <span class="ml-3 text-sm bg-purple-500/20 text-purple-400 px-3 py-1 rounded-full animate-pulse">
                        REAL-TIME
                    </span>
                </h1>
                <div class="flex items-center space-x-4">
                    <div class="text-sm">
                        <span class="text-gray-400">Total Value:</span>
                        <span class="text-white font-semibold ml-2">${{ "%.2f"|format(portfolio_data.total_value) }}</span>
                        <span class="{% if portfolio_data.daily_pnl >= 0 %}text-green-400{% else %}text-red-400{% endif %} ml-2">
                            {% if portfolio_data.daily_pnl >= 0 %}+{% endif %}{{ "%.2f"|format(portfolio_data.daily_pnl_percentage) }}%
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Portfolio Content -->
    <div class="px-6 py-6 max-w-7xl mx-auto">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Main Portfolio Stats -->
            <div class="lg:col-span-2 space-y-6">
                <!-- Portfolio Overview Cards -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-gray-900/60 backdrop-blur-xl rounded-xl border border-gray-800/50 p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-white">Total Value</h3>
                            <i class="fas fa-chart-line text-blue-400"></i>
                        </div>
                        <div class="text-3xl font-bold text-white mb-2">${{ "%.2f"|format(portfolio_data.total_value) }}</div>
                        <div class="{% if portfolio_data.daily_pnl >= 0 %}text-green-400{% else %}text-red-400{% endif %} text-sm">
                            {% if portfolio_data.daily_pnl >= 0 %}+{% endif %}${{ "%.2f"|format(portfolio_data.daily_pnl) }} today
                        </div>
                    </div>

                    <div class="bg-gray-900/60 backdrop-blur-xl rounded-xl border border-gray-800/50 p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-white">Available Cash</h3>
                            <i class="fas fa-dollar-sign text-green-400"></i>
                        </div>
                        <div class="text-3xl font-bold text-white mb-2">${{ "%.2f"|format(portfolio_data.available_cash) }}</div>
                        <div class="text-gray-400 text-sm">Ready to trade</div>
                    </div>

                    <div class="bg-gray-900/60 backdrop-blur-xl rounded-xl border border-gray-800/50 p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-white">In Positions</h3>
                            <i class="fas fa-chart-pie text-purple-400"></i>
                        </div>
                        <div class="text-3xl font-bold text-white mb-2">${{ "%.2f"|format(portfolio_data.positions_value) }}</div>
                        <div class="text-purple-400 text-sm">Active trades</div>
                    </div>
                </div>

                <!-- Portfolio Performance Chart -->
                <div class="bg-gray-900/60 backdrop-blur-xl rounded-xl border border-gray-800/50 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-white">Performance Chart</h3>
                        <div class="flex space-x-2">
                            <button class="px-3 py-1 bg-blue-600 text-white rounded text-sm">1D</button>
                            <button class="px-3 py-1 bg-gray-700 text-gray-300 rounded text-sm hover:bg-gray-600">7D</button>
                            <button class="px-3 py-1 bg-gray-700 text-gray-300 rounded text-sm hover:bg-gray-600">1M</button>
                        </div>
                    </div>
                    <div class="h-64">
                        <canvas id="portfolioChart"></canvas>
                    </div>
                </div>

                <!-- Recent Trades -->
                <div class="bg-gray-900/60 backdrop-blur-xl rounded-xl border border-gray-800/50 p-6">
                    <h3 class="text-lg font-semibold text-white mb-4">Recent Trades</h3>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-3 bg-slate-800/50 rounded-lg">
                            <div class="flex items-center space-x-3">
                                <div class="w-2 h-2 rounded-full bg-green-400"></div>
                                <div>
                                    <div class="text-white font-medium">Buy BTC</div>
                                    <div class="text-xs text-gray-400">0.025 BTC @ $96,234</div>
                                </div>
                            </div>
                            <span class="text-xs text-gray-400">2m ago</span>
                        </div>
                        <div class="flex items-center justify-between p-3 bg-slate-800/50 rounded-lg">
                            <div class="flex items-center space-x-3">
                                <div class="w-2 h-2 rounded-full bg-red-400"></div>
                                <div>
                                    <div class="text-white font-medium">Sell ETH</div>
                                    <div class="text-xs text-gray-400">1.5 ETH @ $3,478</div>
                                </div>
                            </div>
                            <span class="text-xs text-gray-400">15m ago</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Sidebar -->
            <div class="space-y-6">
                <!-- Trading Status -->
                <div class="bg-gray-900/60 backdrop-blur-xl rounded-xl border border-gray-800/50 p-6">
                    <h3 class="text-lg font-semibold text-white mb-4">Trading Status</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span class="text-gray-400">Status</span>
                            <span class="text-green-400">{% if trading_status.is_active %}Active{% else %}Inactive{% endif %}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-400">Mode</span>
                            <span class="text-blue-400">Paper Trading</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-400">Risk Level</span>
                            <span class="text-yellow-400">Medium</span>
                        </div>
                    </div>
                    <button class="w-full mt-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-all">
                        <i class="fas fa-play mr-2"></i>Start Trading
                    </button>
                </div>

                <!-- Current Positions -->
                <div class="bg-gray-900/60 backdrop-blur-xl rounded-xl border border-gray-800/50 p-6">
                    <h3 class="text-lg font-semibold text-white mb-4">Current Positions</h3>
                    <div class="space-y-3">
                        <div class="text-center py-8">
                            <i class="fas fa-chart-line text-gray-500 text-3xl mb-2"></i>
                            <div class="text-gray-400">No active positions</div>
                            <div class="text-gray-500 text-sm">Start trading to see positions</div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="bg-gray-900/60 backdrop-blur-xl rounded-xl border border-gray-800/50 p-6">
                    <h3 class="text-lg font-semibold text-white mb-4">Quick Actions</h3>
                    <div class="space-y-2">
                        <a href="/manual-trading" class="w-full block py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-center transition-all">
                            <i class="fas fa-hand-paper mr-2"></i>Manuel Trading
                        </a>
                        <a href="/trading" class="w-full block py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-center transition-all">
                            <i class="fas fa-brain mr-2"></i>AI Recommendations
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Initialize portfolio chart
function initPortfolioChart() {
    const ctx = document.getElementById('portfolioChart').getContext('2d');
    
    // Generate sample portfolio data
    const labels = [];
    const data = [];
    const baseValue = {{ portfolio_data.total_value }};
    
    for (let i = 23; i >= 0; i--) {
        const hour = (new Date().getHours() - i + 24) % 24;
        labels.push(hour + ':00');
        
        const volatility = 0.02;
        const change = (Math.random() - 0.5) * volatility;
        const value = baseValue * (1 + change * (i / 24) + {{ portfolio_data.daily_pnl_percentage }}/100);
        data.push(value);
    }
    
    new Chart(ctx, {
        type: 'line',
        data: {
            labels: labels,
            datasets: [{
                label: 'Portfolio Value',
                data: data,
                borderColor: '{% if portfolio_data.daily_pnl >= 0 %}#10b981{% else %}#ef4444{% endif %}',
                backgroundColor: '{% if portfolio_data.daily_pnl >= 0 %}rgba(16, 185, 129, 0.1){% else %}rgba(239, 68, 68, 0.1){% endif %}',
                borderWidth: 2,
                fill: true,
                tension: 0.4
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: false }
            },
            scales: {
                x: {
                    grid: { color: 'rgba(148, 163, 184, 0.1)' },
                    ticks: { color: '#64748b' }
                },
                y: {
                    grid: { color: 'rgba(148, 163, 184, 0.1)' },
                    ticks: {
                        color: '#64748b',
                        callback: function(value) {
                            return '$' + value.toLocaleString();
                        }
                    }
                }
            }
        }
    });
}

document.addEventListener('DOMContentLoaded', function() {
    initPortfolioChart();
});
</script>
<<<<<<< HEAD
{% endblock %}
=======
{% endblock %}
>>>>>>> 96de1d9
