{% extends "base.html" %}

{% block content %}
<div class="pt-20"> <!-- Add top padding for fixed navbar -->
    <!-- Page Header -->
    <div class="px-6 py-6 border-b border-gray-800/50 bg-gray-900/40">
        <div class="max-w-7xl mx-auto">
            <h1 class="text-3xl font-bold text-white flex items-center">
                <i class="fas fa-wallet mr-3 text-purple-400"></i>
                Portfolio Management
                <span class="ml-3 text-sm bg-purple-500/20 text-purple-400 px-3 py-1 rounded-full animate-pulse">REAL-TIME</span>
            </h1>
        </div>
    </div>

    <!-- Portfolio Content -->
    <div class="px-6 py-6 max-w-7xl mx-auto">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
            <div class="bg-gray-900/60 backdrop-blur-xl rounded-xl border border-gray-800/50 p-6">
                <h3 class="text-lg font-semibold text-white mb-2">Total Value</h3>
                <div class="text-3xl font-bold text-white">{{ total_balance|currency("$") }}</div>
                <div class="{% if portfolio_data.daily_pnl >= 0 %}text-green-400{% else %}text-red-400{% endif %} text-sm">
                    {% if portfolio_data.daily_pnl >= 0 %}+{% endif %}{{ "%.2f"|format(portfolio_data.daily_pnl_percent) }}% today
                </div>
            </div>
            <div class="bg-gray-900/60 backdrop-blur-xl rounded-xl border border-gray-800/50 p-6">
                <h3 class="text-lg font-semibold text-white mb-2">Available Cash</h3>
                <div class="text-3xl font-bold text-white">${{ "%.2f"|format(portfolio_data.available_balance) }}</div>
                <div class="text-gray-400 text-sm">Ready to trade</div>
            </div>
            <div class="bg-gray-900/60 backdrop-blur-xl rounded-xl border border-gray-800/50 p-6">
                <h3 class="text-lg font-semibold text-white mb-2">In Positions</h3>
                <div class="text-3xl font-bold text-white">${{ "%.2f"|format(portfolio_data.used_balance) }}</div>
                <div class="text-purple-400 text-sm">Active trades</div>
            </div>
        </div>

        <div class="grid grid-cols-1 xl:grid-cols-3 gap-6">
            <div class="xl:col-span-2">
                <div class="bg-gray-900/60 backdrop-blur-xl rounded-xl border border-gray-800/50 p-6">
                    <h3 class="text-lg font-semibold text-white mb-4">Portfolio Performance</h3>
                    <div class="h-64 flex items-center justify-center bg-slate-800/30 rounded">
                        <div class="text-center">
                            <i class="fas fa-chart-line text-4xl text-purple-400 mb-2"></i>
                            <div class="text-white">Live Portfolio Chart</div>
                            <div class="text-gray-400 text-sm">Real-time tracking</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="space-y-6">
                <div class="bg-gray-900/60 backdrop-blur-xl rounded-xl border border-gray-800/50 p-6">
                    <h3 class="text-lg font-semibold text-white mb-4">Trading Status</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between">
                            <span class="text-gray-400">Status</span>
                            <span class="text-green-400">Active</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-400">Mode</span>
                            <span class="text-blue-400">Paper Trading</span>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gray-900/60 backdrop-blur-xl rounded-xl border border-gray-800/50 p-6">
                    <h3 class="text-lg font-semibold text-white mb-4">Quick Actions</h3>
                    <div class="space-y-2">
                        <a href="/manual-trading" class="w-full block py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg text-center transition-all text-sm">
                            <i class="fas fa-hand-paper mr-2"></i>Manuel Trading
                        </a>
                        <a href="/trading" class="w-full block py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-center transition-all text-sm">
                            <i class="fas fa-brain mr-2"></i>AI Trading
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ORIGINAL CONTENT HIDDEN -->
    <div style="display: none;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio - Sofia V2 Real-Time Trading</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6',
                        secondary: '#8b5cf6',
                        success: '#10b981',
                        danger: '#ef4444',
                        warning: '#f59e0b',
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'trade-flash': 'tradeFlash 2s ease-in-out',
                    }
                }
            }
        }
    </script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Alpine.js -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        @keyframes tradeFlash {
            0% { background-color: rgba(16, 185, 129, 0.2); }
            50% { background-color: rgba(16, 185, 129, 0.5); }
            100% { background-color: transparent; }
        }

        .glass {
            background: rgba(15, 23, 42, 0.3);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .glass-hover:hover {
            background: rgba(15, 23, 42, 0.5);
            border-color: rgba(59, 130, 246, 0.4);
            transform: translateY(-2px);
        }

        .gradient-border {
            position: relative;
            background: linear-gradient(135deg, #1e293b, #0f172a);
            border-radius: 12px;
        }

        .gradient-border::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 12px;
            padding: 1px;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            opacity: 0.5;
        }

        .trading-active {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(15, 23, 42, 0.5);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border-radius: 4px;
        }
    </style>
</head>

<body class="min-h-screen bg-gradient-to-br from-gray-950 via-slate-900 to-gray-950" 
      x-data="{
    sidebarOpen: false,
    activeTab: 'positions',
    language: 'tr',
    websocket: null,
    
    // Real-time portfolio data
    portfolio: {
        total_value: {{ portfolio_data.total_value | default(100000) }},
        daily_pnl: {{ portfolio_data.daily_pnl | default(0) }},
        total_return_pct: {{ portfolio_data.daily_pnl_percentage | default(0) }},
        currency: 'USD'
    },
    
    // Trading status
    trading_status: {
        active: true,
        strategies_running: 6,
        last_trade: null
    },
    
    // Recent trades
    recent_trades: [],
    
    // Positions
    positions: [],
    
    // Language texts
    texts: {
        tr: {
            portfolio: 'PortfÃ¶y YÃ¶netimi',
            total_value: 'Toplam DeÄŸer',
            daily_pnl: 'GÃ¼nlÃ¼k Kar/Zarar',
            trading_active: 'Trading Aktif',
            strategies: 'Strateji',
            positions: 'Pozisyonlar',
            recent_trades: 'Son Ä°ÅŸlemler',
            performance: 'Performans',
            no_positions: 'Aktif pozisyon bulunmuyor',
            no_trades: 'HenÃ¼z iÅŸlem yapÄ±lmamÄ±ÅŸ',
            buy: 'ALIM',
            sell: 'SATIÅ',
            profit: 'KAR',
            loss: 'ZARAR'
        },
        en: {
            portfolio: 'Portfolio Management',
            total_value: 'Total Value',
            daily_pnl: 'Daily P&L',
            trading_active: 'Trading Active',
            strategies: 'Strategies',
            positions: 'Positions',
            recent_trades: 'Recent Trades',
            performance: 'Performance',
            no_positions: 'No active positions',
            no_trades: 'No trades yet',
            buy: 'BUY',
            sell: 'SELL',
            profit: 'PROFIT',
            loss: 'LOSS'
        }
    },
    
    currentText() {
        return this.texts[this.language];
    },
    
    // Initialize WebSocket connection
    initWebSocket() {
        try {
            this.websocket = new WebSocket('ws://localhost:8080/ws');
            
            this.websocket.onmessage = (event) => {
                const data = JSON.parse(event.data);
                this.handleWebSocketMessage(data);
            };
            
            this.websocket.onopen = () => {
                console.log('WebSocket connected');
            };
            
            this.websocket.onclose = () => {
                console.log('WebSocket disconnected, reconnecting...');
                setTimeout(() => this.initWebSocket(), 5000);
            };
        } catch (error) {
            console.log('WebSocket connection failed:', error);
            // Fallback to polling
            this.startPolling();
        }
    },
    
    // Handle WebSocket messages
    handleWebSocketMessage(data) {
        if (data.type === 'trade') {
            this.addNewTrade(data.data);
        } else if (data.type === 'portfolio_update') {
            this.updatePortfolio(data.data);
        }
    },
    
    // Add new trade to the list
    addNewTrade(trade) {
        this.recent_trades.unshift({
            time: new Date().toLocaleTimeString(),
            symbol: trade.symbol,
            side: trade.side,
            price: trade.price,
            size: trade.size || trade.quantity,
            pnl: trade.pnl || 0
        });
        
        // Keep only last 20 trades
        if (this.recent_trades.length > 20) {
            this.recent_trades.pop();
        }
        
        // Flash effect for new trade
        setTimeout(() => {
            const tradeRow = document.querySelector('.trade-row:first-child');
            if (tradeRow) {
                tradeRow.classList.add('animate-trade-flash');
            }
        }, 100);
    },
    
    // Update portfolio values
    updatePortfolio(data) {
        if (data.total_value) this.portfolio.total_value = data.total_value;
        if (data.daily_pnl !== undefined) this.portfolio.daily_pnl = data.daily_pnl;
        if (data.total_return_pct !== undefined) this.portfolio.total_return_pct = data.total_return_pct;
    },
    
    // Start polling as fallback
    startPolling() {
        // Fetch real trading data from backend
        this.fetchTradingData();
        setInterval(() => {
            this.fetchTradingData();
        }, 5000);
    },
    
    async fetchTradingData() {
        try {
            // Fetch positions from unified trading API
            const positionsResponse = await fetch('http://localhost:8003/positions');
            const positionsData = await positionsResponse.json();
            
            if (positionsData.positions) {
                this.updatePositionsFromAPI(positionsData.positions);
            }
            
            console.log('Trading data updated:', positionsData);
        } catch (error) {
            console.log('Failed to fetch trading data:', error);
            // Fallback to simulation
            this.portfolio.total_value += (Math.random() - 0.5) * 100;
            this.portfolio.daily_pnl += (Math.random() - 0.5) * 50;
        }
    },
    
    updatePositionsFromAPI(positions) {
        // Update recent trades from actual positions
        Object.values(positions).forEach(position => {
            if (position.entry_time) {
                const entryDate = new Date(position.entry_time);
                // Only add recent positions (last 24 hours)
                if (Date.now() - entryDate.getTime() < 24 * 60 * 60 * 1000) {
                    this.addNewTrade({
                        symbol: position.symbol,
                        side: position.side,
                        price: position.entry_price,
                        size: position.size,
                        pnl: position.unrealized_pnl
                    });
                }
            }
        });
    },
    
    // Format currency
    formatCurrency(amount) {
        return new Intl.NumberFormat('en-US', {
            style: 'currency',
            currency: 'USD',
            minimumFractionDigits: 2
        }).format(amount);
    },
    
    // Format percentage
    formatPercentage(percent) {
        return (percent >= 0 ? '+' : '') + percent.toFixed(2) + '%';
    }
}" 
x-init="initWebSocket()">

    <!-- Background Effects -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="absolute top-0 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl animate-pulse-slow"></div>
        <div class="absolute bottom-0 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse-slow" style="animation-delay: 2s;"></div>
    </div>

    <div class="relative flex h-screen">
        <!-- Sidebar -->
        <aside class="fixed lg:relative w-64 h-full glass border-r border-slate-800 z-50 transform transition-transform duration-300 lg:translate-x-0"
               :class="{'translate-x-0': sidebarOpen, '-translate-x-full': !sidebarOpen}">
            <div class="p-6 border-b border-slate-800">
                <div class="flex items-center space-x-3">
                    <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-lg">
                        <i class="fas fa-robot text-white text-lg"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-white">Sofia V2</h1>
                        <p class="text-xs text-slate-400">AI Trading Platform</p>
                    </div>
                </div>
            </div>

            
        </aside>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col lg:ml-0">
            <!-- Header -->
            <header class="glass border-b border-slate-800 px-6 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <button @click="sidebarOpen = !sidebarOpen" class="text-slate-400 hover:text-white lg:hidden">
                            <i class="fas fa-bars"></i>
                        </button>
                        <h2 class="text-xl font-semibold text-white" x-text="currentText().portfolio">PortfÃ¶y YÃ¶netimi</h2>
                        <div class="hidden sm:flex items-center space-x-2">
                            <div class="w-2 h-2 rounded-full bg-green-500 trading-active"></div>
                            <span class="text-xs text-green-400" x-text="currentText().trading_active">Trading Aktif</span>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <!-- Language Toggle -->
                        <div class="flex bg-slate-800 rounded-lg p-1">
                            <button @click="language = 'tr'" :class="language === 'tr' ? 'bg-blue-500 text-white' : 'text-slate-400'"
                                    class="px-2 py-1 rounded text-sm">ğŸ‡¹ğŸ‡·</button>
                            <button @click="language = 'en'" :class="language === 'en' ? 'bg-blue-500 text-white' : 'text-slate-400'"
                                    class="px-2 py-1 rounded text-sm">ğŸ‡ºğŸ‡¸</button>
                        </div>
                        <button class="text-slate-400 hover:text-white">
                            <i class="fas fa-refresh"></i>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Portfolio Stats -->
            <div class="p-6">
                <!-- Real-time Stats Cards -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <!-- Total Value -->
                    <div class="gradient-border p-5 glass-hover transition-all">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-xs text-slate-400" x-text="currentText().total_value">Toplam DeÄŸer</span>
                            <i class="fas fa-wallet text-blue-400"></i>
                        </div>
                        <div class="text-2xl font-bold text-white mb-1" x-text="formatCurrency(portfolio.total_value)">$100,000</div>
                        <div class="flex items-center space-x-2">
                            <span class="text-xs" :class="portfolio.total_return_pct >= 0 ? 'text-green-400' : 'text-red-400'" 
                                  x-text="formatPercentage(portfolio.total_return_pct)">+0.00%</span>
                            <span class="text-xs text-slate-500">24h</span>
                        </div>
                    </div>

                    <!-- Daily P&L -->
                    <div class="gradient-border p-5 glass-hover transition-all">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-xs text-slate-400" x-text="currentText().daily_pnl">GÃ¼nlÃ¼k Kar/Zarar</span>
                            <i class="fas fa-chart-line" :class="portfolio.daily_pnl >= 0 ? 'text-green-400' : 'text-red-400'"></i>
                        </div>
                        <div class="text-2xl font-bold mb-1" :class="portfolio.daily_pnl >= 0 ? 'text-green-400' : 'text-red-400'" 
                             x-text="formatCurrency(portfolio.daily_pnl)">$0</div>
                        <div class="text-xs text-slate-400">
                            <span x-text="currentText().trading_active">Trading Aktif</span>
                        </div>
                    </div>

                    <!-- Active Strategies -->
                    <div class="gradient-border p-5 glass-hover transition-all">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-xs text-slate-400" x-text="currentText().strategies">Strateji</span>
                            <i class="fas fa-robot text-purple-400"></i>
                        </div>
                        <div class="text-2xl font-bold text-white mb-1" x-text="trading_status.strategies_running + '/6'">6/6</div>
                        <div class="text-xs text-green-400">Aktif</div>
                    </div>

                    <!-- Live Positions -->
                    <div class="gradient-border p-5 glass-hover transition-all">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-xs text-slate-400" x-text="currentText().positions">Pozisyonlar</span>
                            <i class="fas fa-coins text-yellow-400"></i>
                        </div>
                        <div class="text-2xl font-bold text-white mb-1" x-text="positions.length">0</div>
                        <div class="text-xs text-slate-400">AÃ§Ä±k Pozisyon</div>
                    </div>
                </div>

                <!-- Tabs -->
                <div class="flex space-x-1 mb-6 border-b border-slate-800">
                    <button @click="activeTab = 'positions'"
                            :class="activeTab === 'positions' ? 'text-blue-400 border-b-2 border-blue-400' : 'text-slate-400'"
                            class="px-4 py-3 font-medium transition-all" x-text="currentText().positions">
                        Pozisyonlar
                    </button>
                    <button @click="activeTab = 'trades'"
                            :class="activeTab === 'trades' ? 'text-blue-400 border-b-2 border-blue-400' : 'text-slate-400'"
                            class="px-4 py-3 font-medium transition-all" x-text="currentText().recent_trades">
                        Son Ä°ÅŸlemler
                    </button>
                    <button @click="activeTab = 'performance'"
                            :class="activeTab === 'performance' ? 'text-blue-400 border-b-2 border-blue-400' : 'text-slate-400'"
                            class="px-4 py-3 font-medium transition-all" x-text="currentText().performance">
                        Performans
                    </button>
                </div>

                <!-- Tab Content -->
                
                <!-- Positions Tab -->
                <div x-show="activeTab === 'positions'" class="space-y-4">
                    <div class="glass rounded-xl p-6" x-show="positions.length === 0">
                        <div class="text-center py-8">
                            <i class="fas fa-chart-line text-6xl text-slate-600 mb-4"></i>
                            <p class="text-slate-400 text-lg" x-text="currentText().no_positions">Aktif pozisyon bulunmuyor</p>
                            <p class="text-slate-500 text-sm mt-2">Trading sistemi Ã§alÄ±ÅŸÄ±yor, pozisyon aÃ§Ä±ldÄ±ÄŸÄ±nda burada gÃ¶rÃ¼necek</p>
                        </div>
                    </div>
                    
                    <!-- Positions will be shown here when available -->
                    <div x-show="positions.length > 0" class="glass rounded-xl overflow-hidden">
                        <table class="w-full">
                            <thead>
                                <tr class="border-b border-slate-800">
                                    <th class="text-left p-4 text-xs text-slate-400 font-medium">Symbol</th>
                                    <th class="text-right p-4 text-xs text-slate-400 font-medium">Side</th>
                                    <th class="text-right p-4 text-xs text-slate-400 font-medium">Size</th>
                                    <th class="text-right p-4 text-xs text-slate-400 font-medium">Entry</th>
                                    <th class="text-right p-4 text-xs text-slate-400 font-medium">Current</th>
                                    <th class="text-right p-4 text-xs text-slate-400 font-medium">P&L</th>
                                </tr>
                            </thead>
                            <tbody>
                                <template x-for="position in positions" :key="position.symbol">
                                    <tr class="border-b border-slate-800/50 hover:bg-slate-800/20 transition-all">
                                        <td class="p-4 text-white font-medium" x-text="position.symbol"></td>
                                        <td class="p-4 text-right">
                                            <span :class="position.side === 'buy' ? 'text-green-400' : 'text-red-400'" 
                                                  x-text="position.side.toUpperCase()"></span>
                                        </td>
                                        <td class="p-4 text-right text-white" x-text="position.size.toFixed(4)"></td>
                                        <td class="p-4 text-right text-white" x-text="position.entry_price.toFixed(2)"></td>
                                        <td class="p-4 text-right text-white" x-text="position.current_price.toFixed(2)"></td>
                                        <td class="p-4 text-right">
                                            <span :class="position.pnl >= 0 ? 'text-green-400' : 'text-red-400'" 
                                                  x-text="formatCurrency(position.pnl)"></span>
                                        </td>
                                    </tr>
                                </template>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Recent Trades Tab -->
                <div x-show="activeTab === 'trades'" class="space-y-4">
                    <div class="glass rounded-xl p-6" x-show="recent_trades.length === 0">
                        <div class="text-center py-8">
                            <i class="fas fa-exchange-alt text-6xl text-slate-600 mb-4"></i>
                            <p class="text-slate-400 text-lg" x-text="currentText().no_trades">HenÃ¼z iÅŸlem yapÄ±lmamÄ±ÅŸ</p>
                            <p class="text-slate-500 text-sm mt-2">Trading sistemi Ã§alÄ±ÅŸÄ±yor, iÅŸlemler burada gÃ¶rÃ¼necek</p>
                        </div>
                    </div>
                    
                    <div x-show="recent_trades.length > 0" class="space-y-3">
                        <template x-for="(trade, index) in recent_trades" :key="index">
                            <div class="glass rounded-lg p-4 hover:bg-slate-800/30 transition-all trade-row">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 rounded-full flex items-center justify-center" 
                                             :class="trade.side === 'buy' ? 'bg-green-500/20 text-green-400' : 'bg-red-500/20 text-red-400'">
                                            <i :class="trade.side === 'buy' ? 'fas fa-arrow-up' : 'fas fa-arrow-down'" class="text-xs"></i>
                                        </div>
                                        <div>
                                            <p class="font-medium text-white" x-text="trade.symbol"></p>
                                            <p class="text-xs text-slate-400" x-text="trade.time"></p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-medium" :class="trade.side === 'buy' ? 'text-green-400' : 'text-red-400'" 
                                           x-text="(trade.side === 'buy' ? currentText().buy : currentText().sell)"></p>
                                        <p class="text-xs text-slate-400" x-text="trade.size.toFixed(4) + ' @ ' + trade.price.toFixed(2)"></p>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-medium" :class="trade.pnl >= 0 ? 'text-green-400' : 'text-red-400'" 
                                           x-text="formatCurrency(trade.pnl)"></p>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>

                <!-- Performance Tab -->
                <div x-show="activeTab === 'performance'" class="glass rounded-xl p-6">
                    <h3 class="text-lg font-semibold text-white mb-4" x-text="currentText().performance">Performans</h3>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-blue-400" x-text="formatPercentage(portfolio.total_return_pct)">+0.00%</div>
                            <div class="text-sm text-slate-400">Toplam Getiri</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-400" x-text="formatCurrency(portfolio.daily_pnl)">$0</div>
                            <div class="text-sm text-slate-400">GÃ¼nlÃ¼k P&L</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-purple-400">6</div>
                            <div class="text-sm text-slate-400">Aktif Strateji</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-yellow-400">24/7</div>
                            <div class="text-sm text-slate-400">Ã‡alÄ±ÅŸma SÃ¼resi</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Real-time Trading Status -->
    <div class="fixed bottom-6 right-6 glass rounded-xl p-4 max-w-sm">
        <div class="flex items-center space-x-3">
            <div class="w-3 h-3 rounded-full bg-green-500 trading-active"></div>
            <div>
                <p class="text-sm font-medium text-white">Sofia V2 Trading</p>
                <p class="text-xs text-slate-400">6 strateji aktif â€¢ GerÃ§ek zamanlÄ±</p>
            </div>
        </div>
    </div>
</div> <!-- Close pt-20 div -->
{% endblock %}
