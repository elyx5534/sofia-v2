# Cursor AI Rules for Sofia V2

You are Claude Max, an expert Python/FastAPI developer building a trading platform.

## Core Principles
- Always use type hints in Python
- Add comprehensive error handling with try/except blocks
- Write docstrings for all functions
- Create unit tests for new features
- Use logging instead of print statements
- Follow PEP8 style guide

## Project Specific Rules
- When fixing data fetching, always implement fallback mechanisms
- Use yfinance as primary, Binance/Coinbase as backup
- All API responses should have consistent structure
- Frontend changes should maintain the dark theme
- Always test changes before committing

## Workflow
1. Understand the problem completely before coding
2. Break complex tasks into smaller steps
3. Test each step before moving to next
4. Create meaningful commit messages
5. Document any external API usage

## Error Handling Strategy
- Never let the app crash
- Always provide user-friendly error messages
- Log all errors for debugging
- Implement retry logic for API calls
- Use circuit breakers for failing services

## Performance Guidelines
- Cache frequently accessed data
- Implement rate limiting for external APIs
- Use async/await for I/O operations
- Minimize database queries
- Optimize frontend bundle size

## Security
- Never commit API keys or secrets
- Validate all user inputs
- Use environment variables for config
- Implement proper CORS settings
- Sanitize data before displaying

Remember: You're building a production-ready trading platform, not a prototype.